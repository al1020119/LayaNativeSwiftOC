var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var jmt;
(function (jmt) {
    var item;
    (function (item_1) {
        var Image = Laya.Image;
        var Box = Laya.Box;
        var Sprite = Laya.Sprite;
        var Text = Laya.Text;
        var Button = Laya.Button;
        /**
         * 自我属性列表项
         */
        var MySkuListItem = /** @class */ (function (_super) {
            __extends(MySkuListItem, _super);
            function MySkuListItem() {
                var _this = _super.call(this) || this;
                _this.progress = 0;
                _this.size(180, 260);
                _this.skuText = new Text();
                _this.addChild(_this.skuText);
                _this.skuText.font = jmt.Skin.FONT;
                _this.skuText.fontSize = 20;
                _this.skuText.color = '#dddddd';
                _this.skuText.width = _this.width;
                _this.skuText.align = 'center';
                _this.skuText.y = 50;
                _this.loadingBox = new jmt.loading.WaveLoading(_this);
                _this.loadingBox.y = _this.skuText.y + 50;
                return _this;
            }
            MySkuListItem.prototype.setData = function (data) {
                if (data) {
                    if (data.skuname) {
                        this.skuText.text = data.skuname;
                    }
                    if (data.progress) {
                        this.progress = data.progress;
                    }
                    if (data.showtext) {
                        this.showtext = data.showtext;
                    }
                    if (data.skin == jmt.Sku.TYPE_BOTTLE) {
                        this.loadingBox.width = 140;
                        this.loadingBox.init(this.progress, this.showtext, jmt.Skin.LOADING_WAVE_SPIRIT, jmt.Skin.LOADING_BOTTLE, jmt.Skin.LOADING_BOTTLE_COVER);
                    }
                    else if (data.skin == jmt.Sku.TYPE_HUMAN) {
                        this.loadingBox.width = 150;
                        this.loadingBox.init(this.progress, this.showtext, jmt.Skin.LOADING_WAVE_HUMAN, jmt.Skin.LOADING_HUMAN, jmt.Skin.LOADING_HUMAN_COVER);
                    }
                    else {
                        this.loadingBox.width = 160;
                        this.loadingBox.init(this.progress, this.showtext, jmt.Skin.LOADING_WAVE_LOVE, jmt.Skin.LOADING_LOVE, jmt.Skin.LOADING_LOVE_COVER);
                    }
                    this.loadingBox.centerX = 0;
                }
            };
            return MySkuListItem;
        }(Box));
        item_1.MySkuListItem = MySkuListItem;
        /**
         * 关系属性列表项
         */
        var RelaSkuListItem = /** @class */ (function (_super) {
            __extends(RelaSkuListItem, _super);
            function RelaSkuListItem() {
                var _this = _super.call(this) || this;
                _this.progress = 0;
                _this.size(316, 341);
                _this.bgImg = new Image(jmt.Skin.SKU_BG_SMALL);
                _this.addChild(_this.bgImg);
                _this.bgImg.width = _this.width;
                _this.bgImg.height = _this.height;
                // this.bgImg.centerY=0;
                // this.bgImg.centerX=0;
                var coverWidth = 100;
                _this.coverImg = new jmt.common.CircleImgBox(coverWidth, coverWidth);
                _this.coverImg.cover = jmt.Skin.SKU_HEAD_COVER;
                _this.addChild(_this.coverImg);
                _this.coverImg.x = 50;
                _this.coverImg.y = 50;
                _this.nameText = new Text();
                _this.addChild(_this.nameText);
                _this.nameText.font = jmt.Skin.FONT;
                _this.nameText.bold = true;
                _this.nameText.fontSize = 25;
                _this.nameText.color = '#eeeeee';
                _this.nameText.x = _this.coverImg.x + coverWidth + 20;
                _this.nameText.y = 70;
                _this.skuText = new Text();
                _this.addChild(_this.skuText);
                _this.skuText.font = jmt.Skin.FONT;
                _this.skuText.fontSize = 22;
                _this.skuText.color = '#dddddd';
                _this.skuText.x = _this.coverImg.x + coverWidth + 20;
                _this.skuText.y = _this.nameText.y + 40;
                _this.loadingBox = new jmt.loading.WaveLoading(_this, 160);
                _this.loadingBox.y = _this.coverImg.y + _this.coverImg.height + 20;
                return _this;
            }
            RelaSkuListItem.prototype.setData = function (data) {
                if (data) {
                    if (data.bgimg) {
                        this.bgImg.skin = data.bgimg;
                    }
                    if (data.headurl) {
                        this.coverImg.head = jmt.Resource.toHttps(data.headurl);
                    }
                    if (data.rolename) {
                        this.nameText.text = data.rolename;
                    }
                    if (data.skuname) {
                        this.skuText.text = data.skuname;
                    }
                    if (data.progress) {
                        this.progress = data.progress;
                    }
                    if (data.showtext) {
                        this.showtext = data.showtext;
                    }
                    this.loadingBox.init(this.progress, this.showtext, jmt.Skin.LOADING_WAVE_LOVE, jmt.Skin.LOADING_LOVE, jmt.Skin.LOADING_LOVE_COVER);
                    this.loadingBox.centerX = 0;
                }
            };
            return RelaSkuListItem;
        }(Box));
        item_1.RelaSkuListItem = RelaSkuListItem;
        /**
         * 碎片列表项
         */
        var ClueListItem = /** @class */ (function (_super) {
            __extends(ClueListItem, _super);
            function ClueListItem() {
                var _this = _super.call(this) || this;
                _this.size(366, 272);
                _this.bgImg = new Image(jmt.Skin.CLUE_NORMAL_BOX);
                _this.addChild(_this.bgImg);
                _this.bgImg.width = _this.width;
                _this.bgImg.height = _this.height;
                _this.bgImg.x = 0;
                _this.bgImg.y = 0;
                _this.nameBox = new Box();
                _this.addChild(_this.nameBox);
                _this.nameBox.width = 132;
                _this.nameBox.height = 48;
                _this.nameBox.y = 77;
                _this.nameBg = new Image(jmt.Skin.CLUE_NAME_BG);
                _this.nameBox.addChild(_this.nameBg);
                _this.nameBox.rotation = -25;
                _this.nameBox.x = 10;
                _this.nameBg.width = _this.nameBox.width;
                _this.nameBg.height = _this.nameBox.height;
                _this.checkImg = new Image(jmt.Skin.CLUE_CHECKBOX_NORMAL);
                _this.addChild(_this.checkImg);
                _this.checkImg.width = 66;
                _this.checkImg.height = 66;
                _this.checkImg.top = 20;
                _this.checkImg.right = 20;
                // this.checkImg.on(Laya.Event.CLICK, this, function(){console.log('ddddddd')});
                _this.botImg = new Laya.Image(jmt.Skin.READ_RED_POINT);
                _this.addChild(_this.botImg);
                _this.botImg.top = 0;
                _this.botImg.right = 0;
                _this.botImg.visible = false;
                _this.nameText = new Text();
                _this.nameBox.addChild(_this.nameText);
                _this.nameText.width = _this.nameBox.width;
                _this.nameText.height = _this.nameBox.height;
                _this.nameText.font = jmt.Skin.FONT;
                _this.nameText.bold = true;
                _this.nameText.fontSize = 21;
                _this.nameText.color = '#dddddd';
                _this.nameText.align = 'center';
                _this.nameText.valign = 'middle';
                _this.contText = new Text();
                _this.addChild(_this.contText);
                _this.contText.y = 105;
                _this.contText.x = 70;
                _this.contText.width = 240;
                _this.contText.height = 80;
                _this.contText.font = jmt.Skin.FONT;
                _this.contText.bold = true;
                _this.contText.fontSize = 15;
                _this.contText.color = '#dddddd';
                _this.contText.align = 'left';
                _this.contText.wordWrap = true;
                _this.contText.leading = 10;
                _this.contText.overflow = 'hidden';
                return _this;
            }
            ClueListItem.prototype.setData = function (data) {
                if (data) {
                    if (data.bgimg) {
                        this.bgImg.skin = data.bgimg;
                    }
                    if (data.checkimg) {
                        this.checkImg.skin = data.checkimg;
                    }
                    if (data.point) {
                        this.botImg.visible = true;
                    }
                    else {
                        this.botImg.visible = false;
                    }
                    if (data.rolename) {
                        this.nameBox.visible = true;
                        this.nameText.text = data.rolename;
                    }
                    else {
                        this.nameBox.visible = false;
                    }
                    if (data.cont) {
                        this.contText.text = data.cont;
                    }
                    //显示正确线索
                    if (data.right) {
                        this.checkImg.skin = 'skin/clue/pieces_pay_normal_btn.png';
                    }
                }
            };
            return ClueListItem;
        }(Box));
        item_1.ClueListItem = ClueListItem;
        /**
         * 推理列表项
         */
        var AnalyListItem = /** @class */ (function (_super) {
            __extends(AnalyListItem, _super);
            function AnalyListItem() {
                var _this = _super.call(this) || this;
                _this.size(330, 92);
                _this.bgImg = new Image();
                _this.addChild(_this.bgImg);
                _this.bgImg.width = _this.width;
                _this.bgImg.height = _this.height;
                _this.bgImg.x = 0;
                _this.bgImg.y = 0;
                _this.titleText = new Text();
                _this.addChild(_this.titleText);
                _this.titleText.width = _this.width - 90;
                _this.titleText.height = _this.height;
                _this.titleText.font = jmt.Skin.FONT;
                _this.titleText.bold = true;
                _this.titleText.fontSize = 30;
                _this.titleText.color = '#dddddd';
                _this.titleText.align = 'center';
                _this.titleText.valign = 'middle';
                return _this;
            }
            AnalyListItem.prototype.setData = function (data) {
                if (data) {
                    if (data.bgimg) {
                        this.bgImg.skin = data.bgimg;
                    }
                    else {
                        this.bgImg.skin = '';
                    }
                    if (data.title) {
                        this.titleText.text = data.title;
                    }
                    if (data.color) {
                        this.titleText.color = data.color;
                    }
                }
            };
            return AnalyListItem;
        }(Box));
        item_1.AnalyListItem = AnalyListItem;
        /**
         * 阅读日志列表项
         */
        var LogListItem = /** @class */ (function (_super) {
            __extends(LogListItem, _super);
            function LogListItem(item) {
                var _this = _super.call(this) || this;
                _this.space = 10;
                _this.align = 'left';
                // this.size(380, 150);
                // this.height = 100;
                _this.width = 380;
                if (item.type == jmt.Content.TYPE_IMG || item.type == jmt.Content.TYPE_PROP) {
                    _this.imgbtn = new Button('skin/common/btn_pic_icon.png');
                    _this.imgbtn.stateNum = 2;
                    // this.img.size(80,80);
                    _this.imgbtn.centerY = 0;
                    _this.addChild(_this.imgbtn);
                    _this.imgLastText = new Label('（点击查看图片）');
                    _this.imgLastText.left = 100;
                    _this.imgLastText.centerY = 10;
                    _this.height = 80;
                    if (item.cont && item.cont != '') {
                        _this.imgbtn.on(Laya.Event.CLICK, _this, _this.alertImg, [item.cont, item.type]);
                    }
                }
                else {
                    var h = 0;
                    if (item.rolename && item.rolename != '') {
                        _this.nameText = new Label();
                        _this.addChild(_this.nameText);
                        _this.nameText.width = _this.width;
                        _this.nameText.height = 40;
                        _this.nameText.font = jmt.Skin.FONT;
                        _this.nameText.bold = true;
                        _this.nameText.fontSize = 30;
                        _this.nameText.color = '#999999';
                        _this.nameText.align = 'left';
                        _this.nameText.valign = 'middle';
                        _this.nameText.text = item.rolename;
                        h += _this.nameText.height;
                    }
                    if (item.cont && item.cont != '') {
                        _this.contText = new Label();
                        _this.addChild(_this.contText);
                        _this.contText.width = _this.width;
                        // this.contText.height=40;
                        _this.contText.font = jmt.Skin.FONT;
                        // this.contText.bold = true;
                        _this.contText.wordWrap = true;
                        _this.contText.leading = 15;
                        _this.contText.fontSize = 30;
                        _this.contText.color = '#999999';
                        _this.contText.align = 'left';
                        // this.contText.valign = 'middle';
                        var RegExp = /({clue:\d+}|{\/clue}|{big}|{\/big}|{split})/g;
                        item.cont = item.cont.replace(RegExp, "");
                        _this.contText.text = item.cont;
                        h += _this.contText.height;
                    }
                    _this.height = h;
                    if (jmt.Config.DEBUG) {
                        // console.log(this.height);
                    }
                }
                return _this;
                // this.setData(item);
            }
            LogListItem.prototype.alertImg = function (url, imgType) {
                var imgView = new ImageBoxView(jmt.Resource.addDomain(url), null, null, null, imgType);
                imgView.popup();
                // let bg = new Laya.Dialog();
                // let bgImg = new Image(jmt.Config.RES_DOMAIN + url)
                // bg.width = Laya.stage.width;
                // bg.height = Laya.stage.height;
                // bgImg.width = bg.width;
                // bgImg.height = bg.height;
                // bg.addChild(bgImg);
                // bg.popup();
                // bg.on(Laya.Event.CLICK, bg, bg.close);
            };
            LogListItem.prototype.setData = function (data) {
                // if (jmt.Config.DEBUG) {
                //     console.log(data);
                // }
                if (data) {
                    // if (data.bgimg) {
                    //     this.bgImg.skin = data.bgimg;  
                    // }
                    if (data.rolename && data.rolename != '') {
                        this.nameText.visible = true;
                        this.nameText.text = data.rolename;
                    }
                    else {
                        this.nameText.visible = false;
                    }
                    if (data.cont && data.cont != '') {
                        this.contText.visible = true;
                        this.contText.text = data.cont;
                    }
                    else {
                        this.contText.visible = false;
                        this.height = this.nameText.height;
                    }
                }
            };
            return LogListItem;
        }(Laya.VBox));
        item_1.LogListItem = LogListItem;
        /**
         * 目录列表项
         */
        var CatalogListItem = /** @class */ (function (_super) {
            __extends(CatalogListItem, _super);
            function CatalogListItem() {
                var _this = _super.call(this) || this;
                // this.titleText = new Laya.Label();
                // this.addChild(this.titleText);
                // this.titleText.left = this.titleImg.left+120;
                // this.titleText.height = this.height;
                // this.titleText.color = '#222222';
                // this.titleText.fontSize=30;
                // this.titleText.font = jmt.Skin.FONT;
                // this.titleText.valign='middle';
                _this.size(810, 170);
                _this.createBg();
                _this.createPerson();
                _this.createLock();
                _this.createTitle();
                _this.createReading();
                _this.createInfo();
                return _this;
            }
            CatalogListItem.prototype.createBg = function () {
                this.bg_i = new Image();
                this.bg_i.skin = '';
                this.addChild(this.bg_i);
            };
            CatalogListItem.prototype.createPerson = function () {
                this.person_i = new Image();
                var x = this.person_i;
                x.width = 100;
                x.height = 143;
                x.skin = '';
                x.left = 70;
                x.bottom = 7;
                this.addChild(x);
            };
            CatalogListItem.prototype.createTitle = function () {
                this.title_l = new Label();
                var x = this.title_l;
                x.text = '';
                x.font = jmt.Skin.FONT;
                x.fontSize = 31;
                x.top = 45;
                x.color = '#DDDDDD';
                x.centerX = 0;
                x.bold = true;
                this.addChild(x);
            };
            CatalogListItem.prototype.createReading = function () {
                this.reading_l = new Label();
                var x = this.reading_l;
                x.text = '';
                x.color = '#DDDDDD';
                x.fontSize = 24;
                x.centerX = 95;
                x.top = 52;
                this.addChild(x);
            };
            CatalogListItem.prototype.createInfo = function () {
                this.info_l = new Label();
                var x = this.info_l;
                x.text = '';
                x.font = jmt.Skin.FONT;
                x.centerX = 0;
                x.bottom = 46;
                x.color = '#666666';
                x.fontSize = 31;
                this.addChild(x);
            };
            CatalogListItem.prototype.createLock = function () {
                this.lock_i = new Image();
                var x = this.lock_i;
                x.centerX = 0;
                x.centerY = 0;
                x.skin = '';
                this.addChild(x);
            };
            CatalogListItem.prototype.setData = function (data) {
                this.bg_i.skin = data.bgImg;
                // console.log(data.personImg)
                this.person_i.skin = data.personImg;
                this.title_l.text = data.title;
                if (data.lockImg) {
                    this.lock_i.skin = data.lockImg;
                    this.title_l.centerY = 0;
                    this.title_l.color = '#666666';
                }
                if (data.unlock = 1) {
                    this.lock_i.visible = true;
                }
                if (data.info) {
                    this.info_l.text = data.info;
                }
            };
            return CatalogListItem;
        }(Box));
        item_1.CatalogListItem = CatalogListItem;
        /**
         * 顶部按钮列表项
         */
        var MenuListItem = /** @class */ (function (_super) {
            __extends(MenuListItem, _super);
            function MenuListItem() {
                var _this = _super.call(this) || this;
                _this.size(90, 110);
                _this.iconImg = new Image();
                _this.addChild(_this.iconImg);
                _this.iconImg.centerY = 0;
                _this.botImg = new Laya.Image(jmt.Skin.READ_RED_POINT);
                _this.addChild(_this.botImg);
                _this.botImg.top = 0;
                _this.botImg.right = 0;
                _this.botImg.visible = false;
                _this.ballImg = new Laya.Image(jmt.Skin.PIECES_BOX);
                _this.addChild(_this.ballImg);
                _this.ballImg.alpha = 0;
                _this.ballImg.width = _this.width;
                _this.ballImg.height = _this.height;
                _this.ballImg.bottom = 0;
                _this.ballImg.centerX = 0;
                _this.titleText = new Laya.Label();
                _this.addChild(_this.titleText);
                _this.titleText.height = 40;
                _this.titleText.width = _this.width;
                _this.titleText.top = 56;
                _this.titleText.color = '#dddddd';
                _this.titleText.fontSize = 20;
                _this.titleText.font = jmt.Skin.FONT;
                _this.titleText.align = 'center';
                _this.titleText.valign = 'middle';
                return _this;
            }
            MenuListItem.prototype.playBig = function () {
                this.titleText.color = '#ffffff';
                this.titleText.bold = true;
                Laya.Tween.to(this.ballImg, { alpha: 1 }, 50);
                // this.ballImg.alpha=1;
                Laya.Tween.to(this.titleText, { fontSize: 30 }, 200, null, Handler.create(this, this.playSmall));
            };
            MenuListItem.prototype.playSmall = function () {
                this.titleText.color = '#dddddd';
                this.titleText.bold = false;
                Laya.Tween.to(this.ballImg, { alpha: 0 }, 500);
                Laya.Tween.to(this.titleText, { fontSize: 20 }, 500);
            };
            MenuListItem.prototype.setData = function (data) {
                if (data.icon) {
                    this.iconImg.skin = data.icon;
                    if (data.title) {
                        this.titleText.text = data.title;
                        if (data.playbig) {
                            this.playBig();
                        }
                    }
                    if (data.point) {
                        this.botImg.visible = true;
                    }
                    else {
                        this.botImg.visible = false;
                    }
                }
            };
            return MenuListItem;
        }(Box));
        item_1.MenuListItem = MenuListItem;
        var LeadListItem = /** @class */ (function (_super) {
            __extends(LeadListItem, _super);
            // private opinfo: any;
            function LeadListItem() {
                var _this = _super.call(this) || this;
                _this.size(300, 143);
                // this.height=100;
                _this.nameText = new Text();
                _this.addChild(_this.nameText);
                _this.nameText.width = 100;
                _this.nameText.height = 50;
                _this.nameText.color = '#ffffff';
                _this.nameText.fontSize = 30;
                _this.nameText.font = jmt.Skin.FONT;
                _this.nameText.align = 'left';
                _this.nameText.valign = 'middle';
                _this.nameText.x = 30;
                _this.nameText.y = 27;
                _this.skuBox = new Laya.VBox();
                _this.addChild(_this.skuBox);
                _this.skuBox.x = 30;
                _this.skuBox.y = 66;
                _this.roleCover = new jmt.common.CircleImgBox(103, 103);
                _this.addChild(_this.roleCover);
                _this.roleCover.right = 17;
                _this.roleCover.top = 17;
                return _this;
            }
            LeadListItem.prototype.setData = function (data) {
                if (data) {
                    // this.opinfo=data;
                }
                if (data.bgimg) {
                    this.bgImg.skin = data.bgimg;
                }
                this.roleCover.cover = jmt.Skin.SKU_HEAD_COVER;
                if (data.title) {
                    this.nameText.text = data.title;
                }
                else if (data.roleinfo) {
                    this.nameText.text = data.roleinfo.rolename;
                }
                if (data.roleinfo) {
                    data.roleinfo.headurl = jmt.Resource.toHttps(data.roleinfo.headurl);
                    this.roleCover.head = data.roleinfo.headurl;
                    if (data.roleinfo.skulist) {
                        this.skuBox.removeChildren();
                        for (var i = 0; i < data.roleinfo.skulist.length; i++) {
                            var sku = data.roleinfo.skulist[i];
                            var box = new Laya.Box();
                            this.skuBox.addChild(box);
                            box.width = this.skuBox.width;
                            box.height = 30;
                            var img = new Sprite();
                            img.loadImage(sku.icon, 0, 0, 21, 21);
                            box.addChild(img);
                            img.x = 0;
                            img.y = 10;
                            var name = new Text();
                            box.addChild(name);
                            name.x = 30;
                            name.y = 11;
                            name.color = '#dddddd';
                            name.font = jmt.Skin.FONT;
                            name.fontSize = 20;
                            name.text = sku.skualias ? sku.skualias : sku.skuname;
                            if (i > 0) {
                                break;
                            }
                        }
                    }
                }
            };
            return LeadListItem;
        }(Box));
        item_1.LeadListItem = LeadListItem;
        /**
         * 选项列表项
         */
        var OptionListItem = /** @class */ (function (_super) {
            __extends(OptionListItem, _super);
            function OptionListItem() {
                var _this = _super.call(this) || this;
                _this.size(700, 0);
                _this.bgImg = new Image(jmt.Skin.OPTION_NORMAL_BTN);
                //平台，为了兼容零下记忆
                if (jmt.Config.NOVELID != 10000) {
                    _this.size(700, 0);
                    _this.bgImg.skin = 'skin/niji/read_normal_option.png';
                }
                _this.addChild(_this.bgImg);
                _this.bgImg.sizeGrid = '30,40,30,40';
                _this.bgImg.width = 623;
                _this.bgImg.height = 105;
                //平台，为了兼容零下记忆
                if (jmt.Config.NOVELID != 10000) {
                    _this.bgImg.width = 630;
                    _this.bgImg.height = 77;
                }
                _this.bgImg.centerY = 0;
                _this.bgImg.centerX = 0;
                _this.titleText = new Laya.Label();
                _this.addChild(_this.titleText);
                // this.titleText.left = 100;
                // this.titleText.right = 100;
                // this.titleText.height = this.height;
                _this.titleText.color = '#0E0E0E';
                _this.titleText.fontSize = 30;
                //平台，为了兼容零下记忆
                if (jmt.Config.NOVELID != 10000) {
                    _this.titleText.color = '#492424';
                    _this.titleText.fontSize = 27;
                }
                _this.titleText.font = jmt.Skin.FONT;
                // this.titleText.align='left';
                // this.titleText.valign='middle';
                _this.titleText.centerX = 0;
                _this.titleText.centerY = 0;
                _this.selectImg = new Image();
                _this.addChild(_this.selectImg);
                _this.selectImg.top = 0;
                _this.selectImg.right = 0;
                return _this;
            }
            OptionListItem.prototype.showBtnType = function (data, res) {
                if (!res) {
                    return;
                }
                if (res && !res.isbuy) {
                    var btn = new Image('skin/common/read_special_share_btn.png');
                    btn.zOrder = 1;
                    btn.visible = false;
                    var hBox = new Laya.HBox();
                    hBox.space = 2;
                    hBox.align = 'bottom';
                    hBox.centerX = 0;
                    hBox.centerY = 0;
                    var info = new Label();
                    info.color = '#0E0E0E';
                    info.fontSize = 24;
                    btn.addChild(hBox);
                    hBox.addChild(info);
                    this.bgImg.addChild(btn);
                    var shownum = 0;
                    if (res.shownum >= 0) {
                        shownum = res.shownum;
                    }
                    jmt.GlobalData.SPACIAL_OPTION_NUM = shownum;
                    if (res.showad) {
                        if (jmt.GlobalData.SPACIAl_OPTION_TOTAL) {
                            jmt.GlobalData.SPACIAL_RED_LABLE = new Label();
                            jmt.GlobalData.SPACIAL_RED_LABLE.color = '#9F0000';
                            jmt.GlobalData.SPACIAL_RED_LABLE.fontSize = 24;
                            jmt.GlobalData.SPACIAL_RED_LABLE.text = jmt.GlobalData.SPACIAL_OPTION_NUM + "/" + data.adnum;
                            hBox.addChild(jmt.GlobalData.SPACIAL_RED_LABLE);
                        }
                    }
                    btn.top = 70;
                    btn.right = -20;
                    if (res.showshare) {
                        info.text = '分享解锁';
                    }
                    if (res.showad) {
                        info.text = '观看解锁';
                    }
                    if (jmt.GlobalData.SPACIAL_RED_LABLE) {
                        hBox.width = info.width + jmt.GlobalData.SPACIAL_RED_LABLE.width;
                    }
                    btn.width = hBox.width + 40;
                    btn.height = btn.height + 3;
                    Load.style(btn, 'alpha', 0, 1);
                }
            };
            OptionListItem.prototype.setData = function (data, coninfo, index) {
                if (data.bgimg) {
                    this.bgImg.skin = data.bgimg;
                }
                if (data.selectimg) {
                    this.selectImg.skin = data.selectimg;
                    // this.titleText.height = this.height;
                }
                //特殊选项图标
                if (+data.ischarge) {
                    if (!this.specialIcon) {
                        jmt.GlobalData.SPACIAl_OPTION_TOTAL = +data.adnum;
                        this.specialIcon = new Image(jmt.Skin.OPTION_SPECIAL_ICON);
                        this.bgImg.addChild(this.specialIcon);
                        this.specialIcon.height = this.bgImg.height;
                        this.specialIcon.width = this.specialIcon.height - 12;
                        this.specialIcon.top = -2;
                        this.specialIcon.right = 0;
                        // 请求接口，显示不同的文字
                        if (+data.adnum > 0) {
                            var apiUtil = new ApiUtil();
                            apiUtil.checkBuyShare(jmt.QQresType.OPTION, jmt.Data.chapterinfo.chapterid, 0, coninfo.conid, data.opid, Handler.create(this, this.showBtnType, [data]));
                        }
                    }
                }
                if (data.color) {
                    this.titleText.color = data.color;
                }
                else {
                    this.titleText.color = '#0E0E0E';
                    //平台，为了兼容零下记忆
                    if (jmt.Config.NOVELID != 10000) {
                        this.titleText.color = '#492424';
                    }
                }
                this.titleText.text = data.title;
                //如果文本宽度大于500，说明很多文字，当前文本就换行
                if (this.titleText.width > 550) {
                    this.titleText.width = 550;
                    this.titleText.wordWrap = true;
                    this.titleText.leading = 10;
                    this.titleText.centerX = 0;
                }
                var box = this._parent;
                var item = box._childs[index];
                item.top = 0; //这个第一个item的top一定要设置为0，不然默认是NaN;
                //这里是为了  防止文本高度不够，撑不出来高度，所以小于多少时，就设个默认值
                if (this.titleText.height < 1) {
                    this.titleText.height = 77;
                }
                item.height = this.titleText.height + 50;
                item.bgImg.height = item.height;
                if (index > 0) {
                    var beforeItem = box._childs[index - 1];
                    item.top = beforeItem.top + beforeItem.height + 25;
                }
                box.height += item.height + 25;
                // let list = box._parent;
                // list.height = box.height;
            };
            return OptionListItem;
        }(Box));
        item_1.OptionListItem = OptionListItem;
        /**
         * 存档列表项
         */
        var StoreListItem = /** @class */ (function (_super) {
            __extends(StoreListItem, _super);
            function StoreListItem() {
                var _this = _super.call(this) || this;
                _this.size(341, 247);
                _this.bgImg = new Image(jmt.Skin.STORE_NORMAL_BOX);
                _this.addChild(_this.bgImg);
                _this.bgImg.width = _this.width;
                _this.bgImg.height = _this.height;
                // this.bgImg.centerY=0;
                // this.bgImg.centerX=0;
                _this.addImg = new Image(jmt.Skin.STORE_ADD_ICON);
                _this.addChild(_this.addImg);
                _this.addImg.centerX = 0;
                _this.addImg.centerY = 0;
                _this.titleText = new Laya.Label();
                _this.addChild(_this.titleText);
                _this.titleText.wordWrap = true;
                _this.titleText.leading = 10;
                _this.titleText.left = 30;
                _this.titleText.right = 30;
                _this.titleText.font = jmt.Skin.FONT;
                _this.titleText.bold = true;
                _this.titleText.fontSize = 31;
                _this.titleText.color = '#dddddd';
                _this.titleText.x = 33;
                _this.titleText.y = 65;
                _this.timeText = new Text();
                _this.addChild(_this.timeText);
                _this.timeText.font = jmt.Skin.FONT;
                _this.timeText.fontSize = 18;
                _this.timeText.color = '#dddddd';
                _this.timeText.x = 33;
                _this.timeText.y = 165;
                return _this;
            }
            StoreListItem.prototype.setData = function (data) {
                if (data) {
                    if (data.bgimg) {
                        this.bgImg.skin = data.bgimg;
                    }
                    if (data.video) {
                        this.addImg.skin = 'skin/common/video_icon2.png';
                    }
                    if (data.video == 0) {
                        this.addImg.skin = jmt.Skin.STORE_ADD_ICON;
                    }
                    if (data.pay) {
                        this.addImg.skin = 'skin/store/save_progress_unlimited_add_icon.png';
                    }
                    if (data.type == 0) {
                        this.addImg.visible = false;
                        if (data.storeid > 0) {
                            if (data.title) {
                                this.titleText.text = data.title;
                            }
                            if (data.fatime) {
                                this.timeText.text = data.fatime;
                            }
                        }
                        else {
                            this.titleText.visible = true;
                            this.timeText.visible = false;
                            this.titleText.text = '无记录';
                            this.titleText.color = '#666666';
                            this.titleText.fontSize = 30;
                            this.titleText.x = 120;
                            this.titleText.y = 110;
                        }
                    }
                    else {
                        if (data.storeid > 0) {
                            this.titleText.visible = true;
                            this.timeText.visible = true;
                            this.addImg.visible = false;
                            if (data.title) {
                                this.titleText.text = data.title;
                            }
                            if (data.fatime) {
                                this.timeText.text = data.fatime;
                            }
                        }
                        else {
                            this.addImg.visible = true;
                            this.titleText.visible = false;
                            this.timeText.visible = false;
                        }
                    }
                }
            };
            return StoreListItem;
        }(Box));
        item_1.StoreListItem = StoreListItem;
        /**
         * 角色图鉴列表项
         */
        var CoverListItem = /** @class */ (function (_super) {
            __extends(CoverListItem, _super);
            function CoverListItem() {
                var _this = _super.call(this) || this;
                _this.size(119, 174);
                _this.bgImg = new Image(jmt.Skin.COVER_NORMAL_BOX);
                _this.addChild(_this.bgImg);
                // this.bgImg.width=this.width;
                // this.bgImg.height=this.height;
                _this.bgImg.centerY = 0;
                _this.bgImg.centerX = 0;
                _this.headImg = new Image(jmt.Skin.COVER_PERSON);
                _this.addChild(_this.headImg);
                _this.headImg.width = 112;
                _this.headImg.height = 152;
                _this.headImg.bottom = 0;
                _this.headImg.centerX = 0;
                _this.headImg.centerY = 0;
                _this.nameBox = new Box();
                _this.addChild(_this.nameBox);
                _this.nameBox.bottom = 10;
                _this.nameBox.size(112, 41);
                _this.nameBox.centerX = 0;
                _this.nameBox.graphics.loadImage(jmt.Skin.COVER_PERSON_NAME, 0, 0, _this.nameBox.width, _this.nameBox.height);
                _this.nameText = new Label();
                _this.nameBox.addChild(_this.nameText);
                _this.nameText.width = _this.nameBox.width;
                _this.nameText.font = jmt.Skin.FONT;
                _this.nameText.bold = true;
                _this.nameText.centerX = 0;
                _this.nameText.centerY = 5;
                _this.nameText.fontSize = 23;
                _this.nameText.color = '#333333';
                _this.nameText.align = 'center';
                _this.nameText.rotation = -6;
                _this.nameText.overflow = 'hidden';
                return _this;
            }
            CoverListItem.prototype.setData = function (data) {
                if (data) {
                    if (data.bgimg) {
                        this.bgImg.skin = data.bgimg;
                    }
                    if (data.select) {
                        this.bgImg.skin = jmt.Skin.COVER_SELECTED_BOX;
                    }
                    else {
                        this.bgImg.skin = jmt.Skin.COVER_NORMAL_BOX;
                    }
                    if (!data.unlock && !data.headurl) {
                        data.headurl = jmt.Skin.COVER_DEFAULT;
                    }
                    if (data.headurl) {
                        data.headurl = jmt.Resource.toHttps(data.headurl);
                        this.headImg.skin = data.headurl;
                    }
                    if (data.rolename) {
                        this.nameText.text = data.rolename;
                    }
                    else {
                        this.nameText.text = '？？？';
                    }
                }
            };
            return CoverListItem;
        }(Box));
        item_1.CoverListItem = CoverListItem;
    })(item = jmt.item || (jmt.item = {}));
})(jmt || (jmt = {}));
//# sourceMappingURL=ListItem.js.map